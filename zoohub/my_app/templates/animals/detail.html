{% extends 'base.html' %} {% load static %} {% block head %}
<link rel="stylesheet" href="{% static 'css/animals/animal-detail.css' %}" />
{% endblock %} {% block content %}
<div class="animal-details">
    <h1>{{ animal.name }}</h1>
    <div class="image-container">
        <img src="{% static 'images/animal-list.png' %}" />
    </div>
    <h2>A {{ animal.age }} year old {{ animal.type }}</h2>
    <p>{{ animal.description }}</p>
    <div>
        <a href="{% url 'animal-update' animal.id %}">Edit</a>
        <a href="{% url 'animal-delete' animal.id %}">Delete</a>
    </div>

    <div class="feedings-container">
        <h1>Feedings</h1>
        <secion class="feedings">
            <h3>Add a Feeding</h3>
            <form method="post" action="{% url 'add-feeding' animal.id %}" autocomplete="off">
                {% csrf_token %}
                {{ feeding_form.as_p }}
                <button type="submit">Add Feeding</button>
            </form>

            <h3>Past Feedings</h3>
            {% if animal.feeding_set.all.count %}
            <table>
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Meal</th>
                    </tr>
                </thead>
                <tbody>
                    {% for feeding in animal.feeding_set.all %}
                    <tr>
                        <td>{{feeding.date}}</td>
                        <td>{{feeding.get_meal_display}}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

            {% else %}
            <p>⚠️ {{animal.name}} has not been fed!</p>
            {% endif %}
        </secion>
    </div>
    
</div>

{% endblock %}